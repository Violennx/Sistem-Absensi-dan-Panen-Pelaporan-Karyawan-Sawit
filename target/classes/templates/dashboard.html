<!DOCTYPE html>
<html lang="id" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Dashboard SAWITKU</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <style>
    /* Animasi */
    @keyframes fadeSlideIn { from {opacity:0; transform:translateY(15px);} to {opacity:1; transform:translateY(0);} }
    @keyframes fadeZoom { from {opacity:0; transform:scale(0.97);} to {opacity:1; transform:scale(1);} }
    .animate-page { animation: fadeSlideIn 0.6s ease-out; }
    .animate-card { animation: fadeZoom 0.5s ease-out; }

    /* Card hover */
    .card-hover:hover { transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0,0,0,0.1); transition: all 0.3s ease; }

    /* Sidebar active */
    .active-nav { background-color:#065f46; border-left:4px solid #34d399; }
  </style>
</head>
<body class="bg-gradient-to-br from-green-100 to-green-200 min-h-screen flex p-6 font-sans transition-opacity duration-300">

<div class="bg-white w-full max-w-7xl h-[90vh] flex rounded-2xl shadow-2xl overflow-hidden animate-page">

  <!-- SIDEBAR -->
  <aside class="w-64 bg-gradient-to-b from-green-900 to-green-800 text-white flex flex-col">
    <div class="p-6 border-b border-green-700">
      <h1 class="text-2xl font-bold tracking-wide">üå¥ SAWITKU</h1>
      <p class="text-xs text-green-300">Sistem Manajemen Kebun</p>
    </div>

    <nav class="flex-1 py-4 space-y-1 text-sm">

      <a th:href="@{/dashboard}" class="flex items-center gap-3 px-6 py-3 hover:bg-green-700 hover:translate-x-1 transition duration-300 active-nav">
        <i class="fa fa-chart-line w-5"></i> Dashboard
      </a>

      <a th:href="@{/karyawan}" class="flex items-center gap-3 px-6 py-3 hover:bg-green-700 hover:translate-x-1 transition duration-300">
        <i class="fa fa-users w-5"></i> Data Karyawan
      </a>

      <a th:href="@{/absensi}" class="flex items-center gap-3 px-6 py-3 hover:bg-green-700 hover:translate-x-1 transition duration-300">
        <i class="fa fa-clipboard w-5"></i> Absensi & Panen
      </a>

      <a th:href="@{/laporan}" class="flex items-center gap-3 px-6 py-3 hover:bg-green-700 hover:translate-x-1 transition duration-300">
        <i class="fa fa-file-pdf w-5"></i> Laporan Kerja
      </a>

    </nav>

    <div class="p-5 border-t border-green-700 text-sm">
      <p class="text-green-200 mb-2" th:text="'üëã ' + ${session.loggedUser}"></p>
      <a href="/logout" class="block text-red-300 hover:text-white transition">Logout</a>
    </div>
  </aside>

  <!-- CONTENT -->
  <section class="flex-1 flex flex-col bg-gray-50">

    <!-- HEADER -->
    <header class="h-16 bg-white shadow flex items-center justify-between px-8">
      <div>
        <h2 class="text-lg font-semibold text-gray-700">Dashboard Performa Panen</h2>
        <p class="text-xs text-gray-400">Dashboard / Performa</p>
      </div>
      <div class="text-sm text-gray-500">üå§Ô∏è Sistem Monitoring Kebun Sawit</div>
    </header>

    <!-- MAIN -->
    <main class="flex-1 overflow-y-auto p-8 space-y-6">

      <!-- CARDS -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        <div class="bg-white p-6 rounded-xl shadow-md border border-gray-100 animate-card card-hover">
          <h3 class="text-md font-semibold mb-2 text-green-700">Total Karyawan</h3>
          <p class="text-2xl font-bold text-green-800">[[${totalKaryawan}]]</p>
        </div>
        <div class="bg-white p-6 rounded-xl shadow-md border border-gray-100 animate-card card-hover">
          <h3 class="text-md font-semibold mb-2 text-green-700">Karyawan Aktif</h3>
          <p class="text-2xl font-bold text-green-800">[[${karyawanAktif}]]</p>
        </div>
        <div class="bg-white p-6 rounded-xl shadow-md border border-gray-100 animate-card card-hover">
          <h3 class="text-md font-semibold mb-2 text-green-700">Panen Hari Ini</h3>
          <p class="text-2xl font-bold text-green-800">[[${panenHariIni}]]</p>
        </div>
        <div class="bg-white p-6 rounded-xl shadow-md border border-gray-100 animate-card card-hover">
          <h3 class="text-md font-semibold mb-2 text-green-700">Absensi Hari Ini</h3>
          <p>Hadir: [[${hadir}]]</p>
          <p>Izin: [[${izin}]]</p>
          <p>Sakit: [[${sakit}]]</p>
          <p>Alpa: [[${alpa}]]</p>
        </div>
      </div>



    </main>
  </section>
</div>

<script>
document.querySelectorAll("a").forEach(link => {
  if (link.hostname === window.location.hostname && !link.hasAttribute("target")) {
    link.addEventListener("click", function(e) {
      e.preventDefault();
      document.body.style.opacity = "0";
      setTimeout(() => window.location = this.href, 200);
    });
  }
});
window.addEventListener("pageshow", () => { document.body.style.opacity = "1"; });
</script>

</body>
</html>
